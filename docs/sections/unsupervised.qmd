# Unsupervised learning

* Clustering and/or dimension reduction

Trying to Cluster commune datas to:
1. Reduce dimension
2. See similarities

A regarder, est-ce qu'on fait un cluster pour les datas politques + un cluster pour les data d√©mographiques, ou est-ce qu'on regroupe tout?

```{r}
# Clustering demographic
cols_commune_demographic <- select(df_commune, -c("REGION", "CODE_REGION","Conseil national - PLR","Conseil national - PDC", "Conseil national - PS", "Conseil national - UDC", "Conseil national - PEV/PCS", "Conseil national - PVL", "Conseil national - PBD", "Conseil national - PST/Sol.", "Conseil national - PES", "Conseil national - Petits partis de droite"))

# Scale the columns, some are total numbers, some are percentages
cols_commune_demographic <- scale(cols_commune_demographic)

# Calculate the distance matrix
dist_matrix_demographic <- dist(cols_commune_demographic, method = "minkowski")

# Perform hierarchical clustering
hclust_model_demographic <- hclust(dist_matrix_demographic, method = "ward.D2")

# Create dendrogram
dend <- as.dendrogram(hclust_model_demographic)
dend <- color_branches(dend, k = 5) 

plot(dend, main = "Hierarchical Clustering Dendrogram")

```

## Tax
```{r}
library(dendextend)

# Clean data and convert to numeric
cleaned_impots <- apply(impots, 2, function(x) as.numeric(gsub("[^0-9.-]", "", x)))
cleaned_impots[is.na(cleaned_impots)] <- 0  # Replace NA values with 0

# Scale the features
scaled_impots <- scale(cleaned_impots)

# Calculate distance matrix
dist_matrix <- dist(scaled_impots, method = "euclidean")

# Perform hierarchical clustering
hclust_model <- hclust(dist_matrix, method = "ward.D2")

# Create dendrogram
dend <- as.dendrogram(hclust_model)

# Zoom range for the dendrogram
y_zoom_range <- c(0, 140)

# Adjust font size for better visualization
par(cex = 0.6)

# Cut the dendrogram to obtain clusters
clusters <- cutree(hclust_model, k = 4)  # Adjust the number of clusters as needed

# Color branches according to clusters
colored_dend <- color_branches(dend, k = 4)
plot(colored_dend, main = "Hierarchical Clustering Dendrogram", horiz = FALSE, ylim = y_zoom_range)
```

